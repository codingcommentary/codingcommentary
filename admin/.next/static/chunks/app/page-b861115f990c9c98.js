(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9930:function(e,t,a){Promise.resolve().then(a.bind(a,8202))},8202:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});var s=a(7437),n=a(2265),r=a(1668),o=a(9381),l=a(4245),c=a(1379);let i="text-[16px] font-Poppins text-black dark:text-white",u="w-full text-black dark:text-white bg-transparent border rounded h-[40px] px-2 outline-none mt-[10px] font-Poppins";var d=a(369),m=a(7586),h=a(2649);let{useRegisterMutation:p,useActivationMutation:f,useLoginMutation:x,useSocialAuthMutation:k,useLogOutQuery:y}=d.gk.injectEndpoints({endpoints:e=>({register:e.mutation({query:e=>({url:"registration",method:"POST",body:e,credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{let e=await a;s((0,m.f0)({token:e.data.activationToken}))}catch(e){console.log(e)}}}),activation:e.mutation({query:e=>{let{activation_token:t,activation_code:a}=e;return{url:"activate-user",method:"POST",body:{activation_token:t,activation_code:a}}}}),login:e.mutation({query:e=>{let{email:t,password:a}=e;return{url:"login",method:"POST",body:{email:t,password:a},credentials:"include"}},async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{let e=await a;h.Z.set("accessToken",e.data.accessToken),h.Z.set("refreshToken",e.data.refreshToken),s((0,m.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}}),socialAuth:e.mutation({query:e=>{let{email:t,name:a,avatar:s}=e;return{url:"social-auth",method:"POST",body:{email:t,name:a,avatar:s},credentials:"include"}},async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{let e=await a;h.Z.set("accessToken",e.data.accessToken),h.Z.set("refreshToken",e.data.refreshToken),s((0,m.nD)({accessToken:e.data.accessToken,user:e.data.user,refreshToken:e.data.refreshToken}))}catch(e){console.log(e)}}}),logOut:e.query({query:()=>({url:"logout",method:"GET",credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{s((0,m._e)())}catch(e){console.log(e)}}})})});var g=a(8726);let b=l.Ry().shape({name:l.Z_().required("Please enter your name!"),email:l.Z_().email("Invalid email!").required("Please enter your email!"),password:l.Z_().required("Please enter your password!").min(6)});var w=e=>{let{setRoute:t}=e,[a,r]=(0,n.useState)(!1),[l,{data:d,error:m,isSuccess:h}]=p();(0,n.useEffect)(()=>{if(h){let e=(null==d?void 0:d.message)||"Registration successful";g.Am.success(e),t("Verification")}m&&"data"in m&&g.Am.error(m.data.message)},[h,m]);let{errors:f,touched:x,values:k,handleChange:y,handleSubmit:w}=(0,o.TA)({initialValues:{name:"",email:"",password:""},validationSchema:b,onSubmit:async e=>{let{name:t,email:a,password:s}=e;await l({name:t,email:a,password:s})}});return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("h1",{className:"".concat("text-[25px] text-black dark:text-white font-[500] font-Poppins text-center py-2"),children:"Join to EduVoyage"}),(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"".concat(i),htmlFor:"email",children:"Enter your Name"}),(0,s.jsx)("input",{type:"text",name:"",value:k.name,onChange:y,id:"name",placeholder:"johndoe",className:"".concat(f.name&&x.name&&"border-red-500"," ").concat(u)}),f.name&&x.name&&(0,s.jsx)("span",{className:"text-red-500 pt-2 block",children:f.name})]}),(0,s.jsx)("label",{className:"".concat(i),htmlFor:"email",children:"Enter your Email"}),(0,s.jsx)("input",{type:"email",name:"",value:k.email,onChange:y,id:"email",placeholder:"yourmail@gmail.com",className:"".concat(f.email&&x.email&&"border-red-500"," ").concat(u)}),f.email&&x.email&&(0,s.jsx)("span",{className:"text-red-500 pt-2 block",children:f.email}),(0,s.jsxs)("div",{className:"w-full mt-5 relative mb-1",children:[(0,s.jsx)("label",{className:"".concat(i),htmlFor:"email",children:"Enter your password"}),(0,s.jsx)("input",{type:a?"text":"password",name:"password",value:k.password,onChange:y,id:"password",placeholder:"password",className:"".concat(f.password&&x.password&&"border-red-500"," ").concat(u)}),a?(0,s.jsx)(c.Zju,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>r(!1)}):(0,s.jsx)(c.I0d,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>r(!0)})]}),f.password&&x.password&&(0,s.jsx)("span",{className:"text-red-500 pt-2 block",children:f.password}),(0,s.jsx)("div",{className:"w-full mt-5",children:(0,s.jsx)("input",{type:"submit",value:"Sign Up",className:"".concat("flex flex-row justify-center items-center py-3 px-6 rounded-full cursor-pointer bg-[#2190ff] min-h-[45px] w-full text-[16px] font-Poppins font-semibold")})}),(0,s.jsx)("br",{})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("h5",{children:["Go back to"," ",(0,s.jsx)("span",{className:"text-blue-500 cursor-pointer",onClick:()=>t("Login"),children:"login!"})]})]})},j=a(2457),T=e=>{let[t,a]=(0,n.useState)("Login"),{user:o}=(0,j.v9)(e=>e.auth);return(0,s.jsxs)("div",{children:[(0,s.jsx)(r.Z,{title:"EduVoyage",description:"EduVoyage is a elearning platform for students to do online courses",keywords:"EduVoyage"}),(0,s.jsx)("div",{className:"w-[90%] md:w-[420px] m-auto h-screen flex items-center justify-center",children:"Sign-up"===t&&(0,s.jsx)(w,{setRoute:a})})]})}},1668:function(e,t,a){"use strict";var s=a(7437);a(2265),t.Z=e=>{let{title:t,description:a,keywords:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{children:t}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("meta",{name:"description",content:a}),(0,s.jsx)("meta",{name:"keywords",content:n})]})}},369:function(e,t,a){"use strict";a.d(t,{Ac:function(){return i},gk:function(){return l}});var s=a(2800),n=a(1631),r=a(7586),o=a(2649);let l=(0,s.LC)({reducerPath:"api",baseQuery:(0,n.ni)({baseUrl:"http://localhost:8000/api/v1",prepareHeaders:e=>{let t=o.Z.get("accessToken"),a=o.Z.get("refreshToken");return t&&e.set("access-token",t),a&&e.set("refresh-token",a),e}}),endpoints:e=>({refreshToken:e.query({query:e=>({url:"refresh",method:"GET",credentials:"include"})}),loadUser:e.query({query:e=>({url:"me",method:"GET",credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{let e=await a;s((0,r.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}})})}),{useRefreshTokenQuery:c,useLoadUserQuery:i}=l},7586:function(e,t,a){"use strict";a.d(t,{_e:function(){return o},f0:function(){return n},nD:function(){return r}});let s=(0,a(492).oM)({name:"auth",initialState:{token:"",user:""},reducers:{userRegistration:(e,t)=>{e.token=t.payload.token},userLoggedIn:(e,t)=>{e.token=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.user=t.payload.user},userLoggedOut:e=>{e.token="",e.user=""}}}),{userRegistration:n,userLoggedIn:r,userLoggedOut:o}=s.actions;t.ZP=s.reducer}},function(e){e.O(0,[712,369,516,971,23,744],function(){return e(e.s=9930)}),_N_E=e.O()}]);