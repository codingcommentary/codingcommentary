(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9930:function(e,t,s){Promise.resolve().then(s.bind(s,5856))},5856:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(7437),r=s(2265),n=s(1668),o=s(9381),l=s(4245),i=s(1379),c=s(6070),d=s(369),u=s(7586),m=s(2649);let{useRegisterMutation:p,useActivationMutation:h,useLoginMutation:x,useSocialAuthMutation:f,useLogOutQuery:b}=d.gk.injectEndpoints({endpoints:e=>({register:e.mutation({query:e=>({url:"registration",method:"POST",body:e,credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{let e=await s;a((0,u.f0)({token:e.data.activationToken}))}catch(e){console.log(e)}}}),activation:e.mutation({query:e=>{let{activation_token:t,activation_code:s}=e;return{url:"activate-user",method:"POST",body:{activation_token:t,activation_code:s}}}}),login:e.mutation({query:e=>{let{email:t,password:s}=e;return{url:"login",method:"POST",body:{email:t,password:s},credentials:"include"}},async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{let e=await s;m.Z.set("accessToken",e.data.accessToken),m.Z.set("refreshToken",e.data.refreshToken),a((0,u.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}}),socialAuth:e.mutation({query:e=>{let{email:t,name:s,avatar:a}=e;return{url:"social-auth",method:"POST",body:{email:t,name:s,avatar:a},credentials:"include"}},async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{let e=await s;m.Z.set("accessToken",e.data.accessToken),m.Z.set("refreshToken",e.data.refreshToken),a((0,u.nD)({accessToken:e.data.accessToken,user:e.data.user,refreshToken:e.data.refreshToken}))}catch(e){console.log(e)}}}),logOut:e.query({query:()=>({url:"logout",method:"GET",credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{a((0,u._e)())}catch(e){console.log(e)}}})})});var j=s(4962);let w=l.Ry().shape({name:l.Z_().required("Please enter your name!"),email:l.Z_().email("Invalid email!").required("Please enter your email!"),password:l.Z_().required("Please enter your password!").min(6),confirmPassword:l.Z_().oneOf([l.iH("password"),void 0],"Passwords must match").required("Please confirm your password!")});var y=e=>{let{setRoute:t}=e,[s,n]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),[u,{data:m,error:h,isSuccess:x}]=p();(0,r.useEffect)(()=>{if(x){let e=(null==m?void 0:m.message)||"Registration successful";j.Am.success(e),t("Verification")}h&&"data"in h&&j.Am.error(h.data.message)},[x,h]);let{errors:f,touched:b,values:y,handleChange:k,handleSubmit:g}=(0,o.TA)({initialValues:{name:"",email:"",password:"",confirmPassword:""},validationSchema:w,onSubmit:async e=>{let{name:t,email:s,password:a}=e;await u({name:t,email:s,password:a})}});return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h1",{className:"".concat(c.W.title),children:"Join to EduVoyage"}),(0,a.jsxs)("form",{onSubmit:g,children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"".concat(c.W.label),htmlFor:"name",children:"Enter your Name"}),(0,a.jsx)("input",{type:"text",name:"name",value:y.name,onChange:k,id:"name",placeholder:"name",className:"".concat(f.name&&b.name&&"border-red-500"," ").concat(c.W.input)}),f.name&&b.name&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:f.name})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"".concat(c.W.label),htmlFor:"email",children:"Enter your Email"}),(0,a.jsx)("input",{type:"email",name:"email",value:y.email,onChange:k,id:"email",placeholder:"yourmail@gmail.com",className:"".concat(f.email&&b.email&&"border-red-500"," ").concat(c.W.input)}),f.email&&b.email&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:f.email})]}),(0,a.jsxs)("div",{className:"w-full mt-5 relative mb-1",children:[(0,a.jsx)("label",{className:"".concat(c.W.label),htmlFor:"password",children:"Enter your password"}),(0,a.jsx)("input",{type:s?"text":"password",name:"password",value:y.password,onChange:k,id:"password",placeholder:"password",className:"".concat(f.password&&b.password&&"border-red-500"," ").concat(c.W.input)}),s?(0,a.jsx)(i.Zju,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>n(!1)}):(0,a.jsx)(i.I0d,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>n(!0)})]}),f.password&&b.password&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:f.password}),(0,a.jsxs)("div",{className:"w-full mt-5 relative mb-1",children:[(0,a.jsx)("label",{className:"".concat(c.W.label),htmlFor:"confirmPassword",children:"Confirm your password"}),(0,a.jsx)("input",{type:l?"text":"password",name:"confirmPassword",value:y.confirmPassword,onChange:k,id:"confirmPassword",placeholder:"confirm password",className:"".concat(f.confirmPassword&&b.confirmPassword&&"border-red-500"," ").concat(c.W.input)}),l?(0,a.jsx)(i.Zju,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>d(!1)}):(0,a.jsx)(i.I0d,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>d(!0)})]}),f.confirmPassword&&b.confirmPassword&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:f.confirmPassword}),(0,a.jsx)("div",{className:"w-full mt-5",children:(0,a.jsx)("input",{type:"submit",value:"Sign Up",className:"".concat(c.W.button)})}),(0,a.jsx)("br",{})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("h5",{children:["Go back to"," ",(0,a.jsx)("span",{className:"text-blue-500 cursor-pointer",onClick:()=>t("Login"),children:"login!"})]})]})},k=s(2457),g=s(7447),v=e=>{let{setRoute:t}=e,{token:s}=(0,k.v9)(e=>e.auth),[n,{isSuccess:o,error:l}]=h(),[i,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{o&&(j.Am.success("Account activated successfully"),t("Login")),l&&("data"in l?(j.Am.error(l.data.message),d(!0)):console.log("An error occured:",l))},[o,l]);let u=[(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null)],[m,p]=(0,r.useState)({0:"",1:"",2:"",3:""}),x=async()=>{let e=Object.values(m).join("");if(4!==e.length){d(!0);return}await n({activation_token:s,activation_code:e})},f=(e,t)=>{var s,a;d(!1),p({...m,[e]:t}),""===t&&e>0?null===(s=u[e-1].current)||void 0===s||s.focus():1===t.length&&e<3&&(null===(a=u[e+1].current)||void 0===a||a.focus())};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(c.W.title),children:"Verify Your Account"}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"w-full flex items-center justify-center mt-2",children:(0,a.jsx)("div",{className:"w-[80px] h-[80px] rounded-full bg-[#497DF2] flex items-center justify-center",children:(0,a.jsx)(g.$5e,{size:40})})}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"m-auto flex items-center justify-around",children:Object.keys(m).map((e,t)=>(0,a.jsx)("input",{type:"number",ref:u[t],className:"w-[65px] h-[65px] bg-transparent border-[3px] rounded-[10px] flex items-center text-black dark:text-white justify-center text-[18px] font-Poppins outline-none text-center ".concat(i?"shake border-red-500":"dark:border-white border-[#0000004a]"),placeholder:"",maxLength:1,value:m[e],onChange:e=>f(t,e.target.value)},e))}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("button",{className:"".concat(c.W.button),onClick:x,children:"Verify OTP"})}),(0,a.jsx)("br",{}),(0,a.jsxs)("h5",{className:"text-center pt-4 font-Poppins text-[14px] text-black dark:text-white",children:["Go back to sign in?"," ",(0,a.jsx)("span",{className:"text-[#2190ff] pl-1 cursor-pointer",onClick:()=>t("Login"),children:"Sign in"})]})]})},N=s(6463);let T=l.Ry().shape({email:l.Z_().email("Invalid email!").required("Please enter your email!"),password:l.Z_().required("Please enter your password!").min(6)});var P=e=>{let{setRoute:t,setOpen:s,refetch:n}=e,[l,d]=(0,r.useState)(!1),[u,{isSuccess:m,error:p}]=x(),h=(0,o.TA)({initialValues:{email:"",password:""},validationSchema:T,onSubmit:async e=>{let{email:t,password:s}=e;await u({email:t,password:s})}});(0,r.useEffect)(()=>{m&&(j.Am.success("Login Successfully!"),(0,N.redirect)("/admin")),p&&"data"in p&&j.Am.error(p.data.message)},[m,p]);let{errors:f,touched:b,values:w,handleChange:y,handleSubmit:k}=h;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h1",{className:"".concat(c.W.title),children:"Login with EduVoyage"}),(0,a.jsxs)("form",{onSubmit:k,children:[(0,a.jsx)("label",{className:"".concat(c.W.label),htmlFor:"email",children:"Enter your Email"}),(0,a.jsx)("input",{type:"email",name:"",value:w.email,onChange:y,id:"email",placeholder:"yourmail@gmail.com",className:"".concat(f.email&&b.email&&"border-red-500"," ").concat(c.W.input)}),f.email&&b.email&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:f.email}),(0,a.jsxs)("div",{className:"w-full mt-5 relative mb-1",children:[(0,a.jsx)("label",{className:"".concat(c.W.label),htmlFor:"email",children:"Enter your password"}),(0,a.jsx)("input",{type:l?"text":"password",name:"password",value:w.password,onChange:y,id:"password",placeholder:"password",className:"".concat(f.password&&b.password&&"border-red-500"," ").concat(c.W.input)}),l?(0,a.jsx)(i.Zju,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>d(!1)}):(0,a.jsx)(i.I0d,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>d(!0)}),f.password&&b.password&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:f.password})]}),(0,a.jsx)("div",{className:"w-full mt-5",children:(0,a.jsx)("input",{type:"submit",value:"Login",className:"".concat(c.W.button)})}),(0,a.jsx)("br",{})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("h5",{children:["For the first time do sign up"," ",(0,a.jsx)("span",{className:"text-blue-500 cursor-pointer",onClick:()=>t("Sign-up"),children:"Click Here"})]})]})},S=e=>{let[t,s]=(0,r.useState)("Login"),{user:o}=(0,k.v9)(e=>e.auth);return(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Z,{title:"EduVoyage",description:"EduVoyage is a elearning platform for students to do online courses",keywords:"EduVoyage"}),(0,a.jsxs)("div",{className:"w-[90%] md:w-[420px] m-auto h-screen flex items-center justify-center",children:["Login"===t&&(0,a.jsx)(P,{setRoute:s}),"Sign-up"===t&&(0,a.jsx)(y,{setRoute:s}),"Verification"===t&&(0,a.jsx)(v,{setRoute:s})]})]})}},6070:function(e,t,s){"use strict";s.d(t,{W:function(){return a}});let a={title:"text-[25px] text-black dark:text-white font-[500] font-Poppins text-center py-2",label:"text-[16px] font-Poppins text-black dark:text-white",input:"w-full text-black dark:text-white bg-transparent border rounded h-[40px] px-2 outline-none mt-[10px] font-Poppins",button:"flex flex-row justify-center items-center py-3 px-6 rounded-full cursor-pointer bg-[#2190ff] min-h-[45px] w-full text-[16px] font-Poppins font-semibold"}},1668:function(e,t,s){"use strict";var a=s(7437);s(2265),t.Z=e=>{let{title:t,description:s,keywords:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("meta",{name:"description",content:s}),(0,a.jsx)("meta",{name:"keywords",content:r})]})}},369:function(e,t,s){"use strict";s.d(t,{Ac:function(){return c},gk:function(){return l}});var a=s(2800),r=s(1631),n=s(7586),o=s(2649);let l=(0,a.LC)({reducerPath:"api",baseQuery:(0,r.ni)({baseUrl:"http://localhost:8000/api/v1",prepareHeaders:e=>{let t=o.Z.get("accessToken"),s=o.Z.get("refreshToken");return t&&e.set("access-token",t),s&&e.set("refresh-token",s),e}}),endpoints:e=>({refreshToken:e.query({query:e=>({url:"refresh",method:"GET",credentials:"include"})}),loadUser:e.query({query:e=>({url:"me",method:"GET",credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{let e=await s;a((0,n.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}})})}),{useRefreshTokenQuery:i,useLoadUserQuery:c}=l},7586:function(e,t,s){"use strict";s.d(t,{_e:function(){return o},f0:function(){return r},nD:function(){return n}});let a=(0,s(492).oM)({name:"auth",initialState:{token:"",user:""},reducers:{userRegistration:(e,t)=>{e.token=t.payload.token},userLoggedIn:(e,t)=>{e.token=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.user=t.payload.user},userLoggedOut:e=>{e.token="",e.user=""}}}),{userRegistration:r,userLoggedIn:n,userLoggedOut:o}=a.actions;t.ZP=a.reducer}},function(e){e.O(0,[712,520,863,786,374,971,23,744],function(){return e(e.s=9930)}),_N_E=e.O()}]);