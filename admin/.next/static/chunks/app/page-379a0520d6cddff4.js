(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9930:function(e,t,s){Promise.resolve().then(s.bind(s,3123))},3123:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var a=s(7437),r=s(2265),n=s(1668),l=s(9381),o=s(4245),i=s(1379);let c="text-[25px] text-black dark:text-white font-[500] font-Poppins text-center py-2",u="text-[16px] font-Poppins text-black dark:text-white",d="w-full text-black dark:text-white bg-transparent border rounded h-[40px] px-2 outline-none mt-[10px] font-Poppins",m="flex flex-row justify-center items-center py-3 px-6 rounded-full cursor-pointer bg-[#2190ff] min-h-[45px] w-full text-[16px] font-Poppins font-semibold";var p=s(369),h=s(7586),x=s(2649);let{useRegisterMutation:f,useActivationMutation:j,useLoginMutation:y,useSocialAuthMutation:b,useLogOutQuery:k}=p.gk.injectEndpoints({endpoints:e=>({register:e.mutation({query:e=>({url:"registration",method:"POST",body:e,credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{let e=await s;a((0,h.f0)({token:e.data.activationToken}))}catch(e){console.log(e)}}}),activation:e.mutation({query:e=>{let{activation_token:t,activation_code:s}=e;return{url:"activate-user",method:"POST",body:{activation_token:t,activation_code:s}}}}),login:e.mutation({query:e=>{let{email:t,password:s}=e;return{url:"login",method:"POST",body:{email:t,password:s},credentials:"include"}},async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{let e=await s;x.Z.set("accessToken",e.data.accessToken),x.Z.set("refreshToken",e.data.refreshToken),a((0,h.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}}),socialAuth:e.mutation({query:e=>{let{email:t,name:s,avatar:a}=e;return{url:"social-auth",method:"POST",body:{email:t,name:s,avatar:a},credentials:"include"}},async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{let e=await s;x.Z.set("accessToken",e.data.accessToken),x.Z.set("refreshToken",e.data.refreshToken),a((0,h.nD)({accessToken:e.data.accessToken,user:e.data.user,refreshToken:e.data.refreshToken}))}catch(e){console.log(e)}}}),logOut:e.query({query:()=>({url:"logout",method:"GET",credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{a((0,h._e)())}catch(e){console.log(e)}}})})});var g=s(8726),w=s(6463);let v=o.Ry().shape({email:o.Z_().email("Invalid email!").required("Please enter your email!"),password:o.Z_().required("Please enter your password!").min(6)});var N=e=>{let{setRoute:t,setOpen:s,refetch:n}=e,[o,p]=(0,r.useState)(!1),[h,{isSuccess:x,error:f}]=y(),j=(0,l.TA)({initialValues:{email:"",password:""},validationSchema:v,onSubmit:async e=>{let{email:t,password:s}=e;await h({email:t,password:s})}});(0,r.useEffect)(()=>{x&&(g.Am.success("Login Successfully!"),(0,w.redirect)("/admin")),f&&"data"in f&&g.Am.error(f.data.message)},[x,f]);let{errors:b,touched:k,values:N,handleChange:T,handleSubmit:S}=j;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h1",{className:"".concat(c),children:"Login with ELearning"}),(0,a.jsxs)("form",{onSubmit:S,children:[(0,a.jsx)("label",{className:"".concat(u),htmlFor:"email",children:"Enter your Email"}),(0,a.jsx)("input",{type:"email",name:"",value:N.email,onChange:T,id:"email",placeholder:"loginmail@gmail.com",className:"".concat(b.email&&k.email&&"border-red-500"," ").concat(d)}),b.email&&k.email&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:b.email}),(0,a.jsxs)("div",{className:"w-full mt-5 relative mb-1",children:[(0,a.jsx)("label",{className:"".concat(u),htmlFor:"email",children:"Enter your password"}),(0,a.jsx)("input",{type:o?"text":"password",name:"password",value:N.password,onChange:T,id:"password",placeholder:"password!@%",className:"".concat(b.password&&k.password&&"border-red-500"," ").concat(d)}),o?(0,a.jsx)(i.Zju,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>p(!1)}):(0,a.jsx)(i.I0d,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>p(!0)}),b.password&&k.password&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:b.password})]}),(0,a.jsx)("div",{className:"w-full mt-5",children:(0,a.jsx)("input",{type:"submit",value:"Login",className:"".concat(m)})}),(0,a.jsx)("br",{})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("h5",{children:["For the first time do sign up"," ",(0,a.jsx)("span",{className:"text-blue-500 cursor-pointer",onClick:()=>t("Sign-up"),children:"Click Here"})]})]})};let T=o.Ry().shape({name:o.Z_().required("Please enter your name!"),email:o.Z_().email("Invalid email!").required("Please enter your email!"),password:o.Z_().required("Please enter your password!").min(6)});var S=e=>{let{setRoute:t}=e,[s,n]=(0,r.useState)(!1),[o,{data:p,error:h,isSuccess:x}]=f();(0,r.useEffect)(()=>{if(x){let e=(null==p?void 0:p.message)||"Registration successful";g.Am.success(e),t("Verification")}h&&"data"in h&&g.Am.error(h.data.message)},[x,h]);let{errors:j,touched:y,values:b,handleChange:k,handleSubmit:w}=(0,l.TA)({initialValues:{name:"",email:"",password:""},validationSchema:T,onSubmit:async e=>{let{name:t,email:s,password:a}=e;await o({name:t,email:s,password:a})}});return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h1",{className:"".concat(c),children:"Join to EduVoyage"}),(0,a.jsxs)("form",{onSubmit:w,children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"".concat(u),htmlFor:"email",children:"Enter your Name"}),(0,a.jsx)("input",{type:"text",name:"",value:b.name,onChange:k,id:"name",placeholder:"johndoe",className:"".concat(j.name&&y.name&&"border-red-500"," ").concat(d)}),j.name&&y.name&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:j.name})]}),(0,a.jsx)("label",{className:"".concat(u),htmlFor:"email",children:"Enter your Email"}),(0,a.jsx)("input",{type:"email",name:"",value:b.email,onChange:k,id:"email",placeholder:"yourmail@gmail.com",className:"".concat(j.email&&y.email&&"border-red-500"," ").concat(d)}),j.email&&y.email&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:j.email}),(0,a.jsxs)("div",{className:"w-full mt-5 relative mb-1",children:[(0,a.jsx)("label",{className:"".concat(u),htmlFor:"email",children:"Enter your password"}),(0,a.jsx)("input",{type:s?"text":"password",name:"password",value:b.password,onChange:k,id:"password",placeholder:"password",className:"".concat(j.password&&y.password&&"border-red-500"," ").concat(d)}),s?(0,a.jsx)(i.Zju,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>n(!1)}):(0,a.jsx)(i.I0d,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>n(!0)})]}),j.password&&y.password&&(0,a.jsx)("span",{className:"text-red-500 pt-2 block",children:j.password}),(0,a.jsx)("div",{className:"w-full mt-5",children:(0,a.jsx)("input",{type:"submit",value:"Sign Up",className:"".concat(m)})}),(0,a.jsx)("br",{})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("h5",{children:["Go back to"," ",(0,a.jsx)("span",{className:"text-blue-500 cursor-pointer",onClick:()=>t("Login"),children:"login!"})]})]})},E=s(7447),P=s(2457),C=e=>{let{setRoute:t}=e,{token:s}=(0,P.v9)(e=>e.auth),[n,{isSuccess:l,error:o}]=j(),[i,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{l&&(g.Am.success("Account activated successfully"),t("Login")),o&&("data"in o?(g.Am.error(o.data.message),u(!0)):console.log("An error occured:",o))},[l,o]);let d=[(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null)],[p,h]=(0,r.useState)({0:"",1:"",2:"",3:""}),x=async()=>{let e=Object.values(p).join("");if(4!==e.length){u(!0);return}await n({activation_token:s,activation_code:e})},f=(e,t)=>{var s,a;u(!1),h({...p,[e]:t}),""===t&&e>0?null===(s=d[e-1].current)||void 0===s||s.focus():1===t.length&&e<3&&(null===(a=d[e+1].current)||void 0===a||a.focus())};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(c),children:"Verify Your Account"}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"w-full flex items-center justify-center mt-2",children:(0,a.jsx)("div",{className:"w-[80px] h-[80px] rounded-full bg-[#497DF2] flex items-center justify-center",children:(0,a.jsx)(E.$5e,{size:40})})}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"m-auto flex items-center justify-around",children:Object.keys(p).map((e,t)=>(0,a.jsx)("input",{type:"number",ref:d[t],className:"w-[65px] h-[65px] bg-transparent border-[3px] rounded-[10px] flex items-center text-black dark:text-white justify-center text-[18px] font-Poppins outline-none text-center ".concat(i?"shake border-red-500":"dark:border-white border-[#0000004a]"),placeholder:"",maxLength:1,value:p[e],onChange:e=>f(t,e.target.value)},e))}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("button",{className:"".concat(m),onClick:x,children:"Verify OTP"})}),(0,a.jsx)("br",{}),(0,a.jsxs)("h5",{className:"text-center pt-4 font-Poppins text-[14px] text-black dark:text-white",children:["Go back to sign in?"," ",(0,a.jsx)("span",{className:"text-[#2190ff] pl-1 cursor-pointer",onClick:()=>t("Login"),children:"Sign in"})]})]})},Z=e=>{let[t,s]=(0,r.useState)("Login"),{user:l}=(0,P.v9)(e=>e.auth);return(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Z,{title:"EduVoyage",description:"EduVoyage is a elearning platform for students to do online courses",keywords:"EduVoyage"}),(0,a.jsxs)("div",{className:"w-[90%] md:w-[420px] m-auto h-screen flex items-center justify-center",children:["Login"===t&&(0,a.jsx)(N,{setRoute:s}),"Sign-up"===t&&(0,a.jsx)(S,{setRoute:s}),"Verification"===t&&(0,a.jsx)(C,{setRoute:s})]})]})}},1668:function(e,t,s){"use strict";var a=s(7437);s(2265),t.Z=e=>{let{title:t,description:s,keywords:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("meta",{name:"description",content:s}),(0,a.jsx)("meta",{name:"keywords",content:r})]})}},369:function(e,t,s){"use strict";s.d(t,{Ac:function(){return c},gk:function(){return o}});var a=s(2800),r=s(1631),n=s(7586),l=s(2649);let o=(0,a.LC)({reducerPath:"api",baseQuery:(0,r.ni)({baseUrl:"http://localhost:8000/api/v1",prepareHeaders:e=>{let t=l.Z.get("accessToken"),s=l.Z.get("refreshToken");return t&&e.set("access-token",t),s&&e.set("refresh-token",s),e}}),endpoints:e=>({refreshToken:e.query({query:e=>({url:"refresh",method:"GET",credentials:"include"})}),loadUser:e.query({query:e=>({url:"me",method:"GET",credentials:"include"}),async onQueryStarted(e,t){let{queryFulfilled:s,dispatch:a}=t;try{let e=await s;a((0,n.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}})})}),{useRefreshTokenQuery:i,useLoadUserQuery:c}=o},7586:function(e,t,s){"use strict";s.d(t,{_e:function(){return l},f0:function(){return r},nD:function(){return n}});let a=(0,s(492).oM)({name:"auth",initialState:{token:"",user:""},reducers:{userRegistration:(e,t)=>{e.token=t.payload.token},userLoggedIn:(e,t)=>{e.token=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.user=t.payload.user},userLoggedOut:e=>{e.token="",e.user=""}}}),{userRegistration:r,userLoggedIn:n,userLoggedOut:l}=a.actions;t.ZP=a.reducer}},function(e){e.O(0,[520,712,437,369,374,971,23,744],function(){return e(e.s=9930)}),_N_E=e.O()}]);